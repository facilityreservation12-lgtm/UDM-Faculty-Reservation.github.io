<!--comment -->
<!--comment2 -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4Care - Schedule Appointment</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: #f3f4f6; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .appointment-form { width: 100%; max-width: 500px; padding: 40px; border-radius: 20px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2); background: white; position: relative;}
        .form-header { text-align: center; margin-bottom: 30px; }
        .form-header h2 { color: rgb(73, 41, 129); font-size: 2em; margin-bottom: 10px; }
        .form-group { margin-bottom: 25px; position: relative; }
        .form-group label { display: block; margin-bottom: 8px; color: rgb(73, 41, 129); font-weight: 500; }
        .input-group { position: relative; }
        .input-group i { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: rgb(73, 41, 129); }
        .form-control { width: 100%; padding: 12px 15px 12px 45px; border: 2px solid rgb(73, 41, 129); border-radius: 8px; font-size: 1em; transition: all 0.3s ease; background: rgba(255, 255, 255, 0.9); }
        .form-control:focus { border-color: rgb(73, 41, 129); box-shadow: 0 0 10px rgb(73, 41, 129); outline: none; }
        .error-message { color: #e74c3c; font-size: 0.9em; margin-top: 5px; display: none; opacity: 0; transition: opacity 0.3s ease; }
        .form-control.error { border-color: #e74c3c; }
        .form-control.success { border-color: #064b23; }
        .time-slots { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; margin-top: 10px; }
        .time-slot { padding: 10px; border: 2px solid #ddd; border-radius: 6px; text-align: center; cursor: pointer; transition: all 0.3s ease; }
        .time-slot:hover { background: rgba(30, 60, 114, 0.1); }
        .time-slot.selected { background: rgb(127, 83, 204); color: white; border-color: rgb(73, 41, 129); }
        .submit-btn { width: 100%; padding: 15px; background: rgb(73, 41, 129); color: white; border: none; border-radius: 8px; font-size: 1.1em; cursor: pointer; transition: all 0.3s ease; margin-top: 20px; }
        .submit-btn:hover { background: #f8f8f8; color: rgb(73, 41, 129); transform: translateY(-2px); }
        .success-message { display: none; text-align: center; color: #2ecc71; margin-top: 20px; font-size: 1.1em; padding: 10px; border-radius: 8px; background: rgba(46, 204, 113, 0.1); }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        .shake { animation: shake 0.4s ease-in-out; }
        @media (max-width: 480px) { .appointment-form { padding: 20px; } .form-header h2 { font-size: 1.5em; } .time-slots { grid-template-columns: repeat(2, 1fr); } }

             .mic-button {
  position: absolute;
  top: 30px;
  right: -80px;
  width: 55px;
  height: 55px;
  border-radius: 50%;
  background: white;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  z-index: 10;
}

.mic-button i {
  color: purple;
  font-size: 26px;
}

.mic-active {
  animation: float 3s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

    </style>
</head>

<body>
    <form class="appointment-form" id="appointmentForm">
        <div class="form-header">
            <h2>Schedule an Appointment</h2>
        </div>

        <!-- Mic Icon (Single Only) -->
<div class="mic-button" id="micButton">
  <i class="fas fa-microphone"></i>
</div>

        <div class="form-group">
            <label for="name">Full Name</label>
            <div class="input-group">
                <i class="fas fa-user"></i>
                <input type="text" id="name" class="form-control" placeholder="Please say your full name" autocomplete="name" onfocus="setActiveField('name')" />
            </div>
            <div class="error-message" id="nameError">Please enter a valid name</div>
        </div>
        <div class="form-group">
            <label for="phone">Phone Number</label>
            <div class="input-group">
                <i class="fas fa-phone"></i>
                <input type="text" id="phone" class= "form-control" placeholder="Please say your phone number" autocomplete="number" onfocus="setActiveField('phone')" />
            </div>
            <div class="error-message" id="phoneError">Please enter a valid phone number</div>
        </div>
        <div class="form-group">
            <label for="date">Preferred Date</label>
            <div class="input-group">
                <i class="fas fa-calendar"></i>
                <input type="date" id="date" class="form-control" min="" required>
            </div>
            <div class="error-message" id="dateError">Please select a valid date</div>
        </div>
        <div class="form-group">
            <label>Preferred Time</label>
            <div class="time-slots" id="timeSlots">
                <div class="time-slot" data-time="09:00">9:00 AM</div>
                <div class="time-slot" data-time="10:00">10:00 AM</div>
                <div class="time-slot" data-time="11:00">11:00 AM</div>
                <div class="time-slot" data-time="14:00">2:00 PM</div>
            </div>
            <div class="error-message" id="timeError">Please select a time slot</div>
        </div>
        <div class="form-group">
            <label for="message">Reason for your visit? <span style="color: #e74c3c;">*</span></label>
            <div class="input-group">
                <i class="fas fa-comment"></i>
                <textarea id="message" class="form-control" placeholder="Please describe the reason for this visit" autocomplete="reason" onfocus="setActiveField('message')" rows="4" required></textarea>
            </div>
            <div class="error-message" id="messageError">Please describe the reason for your visit</div>
        </div>
        <button type="submit" class="submit-btn">Schedule Appointment</button>
        <div class="success-message" id="successMessage">
            Your appointment has been scheduled successfully! I'll contact you shortly.
        </div> 


<script>
let recognition;
let activeField = null;

function setActiveField(fieldId) {
  activeField = fieldId;
}

// Formatters
function formatName(name) {
  const parts = name.trim().toLowerCase().split(" ");
  if (parts.length === 0) return "";
  const firstName = parts[0];
  const middleInitial = parts.length > 2 ? parts[1].charAt(0).toUpperCase() + "." : "";
  const lastName = parts.length > 2 ? parts.slice(2).join(" ") : parts[1] || "";
  return [
    firstName.charAt(0).toUpperCase() + firstName.slice(1),
    middleInitial,
    lastName.charAt(0).toUpperCase() + lastName.slice(1)
  ].filter(Boolean).join(" ");
}

function formatPhone(phone) {
  return phone.replace(/\D/g, "");
}

function formatReason(text) {
  if (!text) return '';
  text = text.trim();
  return text.charAt(0).toUpperCase() + text.slice(1).toLowerCase().replace(/([.?!])\s*(?=\w)/g, match => match.toUpperCase());
}

document.addEventListener("DOMContentLoaded", () => {
  const micButton = document.getElementById("micButton");
  const form = document.getElementById("appointmentForm");

  if (!('webkitSpeechRecognition' in window || 'SpeechRecognition' in window)) {
    alert("Speech recognition is not supported in this browser.");
    return;
  }

  recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
  recognition.lang = 'en-PH';
  recognition.interimResults = false;

  recognition.onresult = function(event) {
    const transcript = event.results[event.results.length - 1][0].transcript;
    if (!activeField) return;

    let formatted = transcript;
    if (activeField === "name") formatted = formatName(transcript);
    if (activeField === "phone") formatted = formatPhone(transcript);
    if (activeField === "message") formatted = formatReason(transcript);

    document.getElementById(activeField).value = formatted;
  };

  recognition.onerror = function(event) {
    console.error("Speech error:", event.error);
    micButton.classList.remove("mic-active");
  };

  recognition.onend = function() {
    // Restart mic automatically
    recognition.start();
  };

  // Start mic after short delay (allow page to load fully)
  setTimeout(() => {
    recognition.start();
    micButton.classList.add("mic-active");
  }, 1500);

  // Stop mic on form submit
  form.addEventListener("submit", () => {
    recognition.stop();
    micButton.classList.remove("mic-active");
  });
});
</script>
    </form>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('date').min = today;
        const form = document.getElementById('appointmentForm');
        const nameInput = document.getElementById('name');
        const phoneInput = document.getElementById('phone');
        const dateInput = document.getElementById('date');
        const timeSlots = document.querySelectorAll('.time-slot');
        const successMessage = document.getElementById('successMessage');
        const messageInput = document.getElementById('message');
        const namePattern = /^[a-zA-Z\s]{2,50}$/;
        // Time slot selection
    timeSlots.forEach(slot => {
  // TODO: Add logic for selecting time slot

    });
