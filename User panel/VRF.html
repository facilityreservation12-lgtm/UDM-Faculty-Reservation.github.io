<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Venue Reservation Form</title>
  <link rel="stylesheet" href="CSS/VRF.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.min.js"></script>
  <script src="../supabaseClient.js"></script>
  <script src="Javascript/VRF.js" defer></script>
</head>
<body>
  <div class="notification-panel" id="notificationPanel">
    <h1>Notifications</h1>
    <div class="notification-container">
    <div class="notification-item">Your Request for Palma hall on May 12, 2025 at
      1:00pm-3:00pm is currently Pending</div>
    <div class="notification-item">Your Request for Palma hall on May 12, 2025 at
      1:00pm-3:00pm is currently Pending</div>
    <div class="notification-item">Your Request for Palma hall on May 12, 2025 at
      1:00pm-3:00pm is currently Pending</div>
    <div class="notification-item">Your Request for Palma hall on May 12, 2025 at
      1:00pm-3:00pm is currently Pending</div>        
    </div> 
  </div>
  <div class="notification-overlay" id="notificationOverlay"></div>

  <div class="sidebar">
    <div>
      <div class="user-photo">
        <img src="images/udm-logo.webp" alt="User Photo" />
        <div>
          <b><p class="UserName" id="UserName">Loading...</p></b>
          <p class="UserRole" id="UserRole">Loading...</p>
        </div>
      </div>
      <div class="menu">
        <a href="Userdashboard.html">Dashboard</a>
        <a href="Usercalendar.html">Request Calendar</a>
        <a onclick="toggleNotificationPanel()">Notification</a>
      </div>
    </div>
    <button onclick="window.location.href='landingPage.html'" class="logout-btn">Log Out</button>
  </div>

  <main>
    <div class="form-container">
      <h2>Venue Reservation Form</h2>

      <form id="reservationForm">
        <div class="row">
           <label>Date Filed: <input type="date" name="dateFiled" readonly></label>
           <label>Date/Time Received: <input type="datetime-local" name="dateReceived" readonly></label>
           <div class="time-inputs">
           <label>Time Start: <input type="time" name="timeStart" required></label>
           <label>Time End: <input type="time" name="timeEnd" required></label>
          </div>
        </div>

        <div class="row">
          <input type="text" id="unitOffice" name="unitOffice" placeholder="Unit/Office/College" required>
          <input type="date" id="dateOfEvent" name="dateOfEvent" placeholder="Date of Event" required>
          <input type="text" id="attendees" name="attendees" placeholder="Attendees" required>
        </div>

        <div class="row">
          <input type="text" id="eventTitle" name="eventTitle" placeholder="Title of Event/Activity" required>
          <input type="text" id="additionalReq" name="additionalReq" placeholder="Additional Requirements" required>
        </div>

        <!-- UDM Facility Dropdown -->
        <div class="dropdown">
          <button type="button" class="dropdown-btn">UDM Facility</button>
          <div class="dropdown-content">
            <label><input type="radio" name="facility" value="Palma Hall"> Palma Hall</label>
            <label><input type="radio" name="facility" value="Right Wing Lobby"> Right Wing Lobby</label>
            <label><input type="radio" name="facility" value="Mehan Garden"> Mehan Garden</label>
            <label><input type="radio" name="facility" value="Rooftop"> Rooftop</label>
            <label>
              <input type="radio" name="facility" value="Classroom"> Classroom
              <input type="text" placeholder="Room #" class="extra-input">
            </label>
            <label><input type="radio" name="facility" value="Basketball Court"> Basketball Court</label>
            <label><input type="radio" name="facility" value="Ground Floor Space"> Space at the ground floor</label>
            <label>
              <input type="radio" name="facility" value="Others"> Others
              <input type="text" placeholder="Specify" class="extra-input">
            </label>
          </div>
        </div>

        <!-- Setup Details Dropdown -->
        <div class="dropdown">
          <button type="button" class="dropdown-btn">Set up Details</button>
          <div class="dropdown-content">
            <label><input type="checkbox" name="setup" value="Chairs"> Chairs</label>
            <label><input type="checkbox" name="setup" value="Tables"> Tables</label>
            <label><input type="checkbox" name="setup" value="Sound System"> Sound System</label>
            <label><input type="checkbox" name="setup" value="Electrical System"> Electrical System</label>
            <label><input type="checkbox" name="setup" value="Projector/HDMI"> Projector/HDMI</label>
            <label>
              <input type="checkbox" name="setup" value="Others"> Others
              <input type="text" placeholder="Specify" class="extra-input">
            </label>
          </div>
        </div>

        <!-- Signatures -->
        <div class="signatures">
          <div class="signContainer">
            Requested by:<br>
            <div id="signatureDropArea" class="signature-drop-area">
              <input type="file" id="signature" accept="image/*" style="display: none;">
              <div class="drop-text">
                <p>Drop your signature here or click to browse</p>
                <small>Accepted formats: JPG, PNG</small>
              </div>
              <img id="signaturePreview" class="signature-preview" style="display: none;" alt="Signature Preview">
            </div>
            <div class="Personel">(Name and E-signature)<br>End-User/Requester/Event organizer   </div>
          </div>
          <div class="signContainer">
            Recommending Approval:<br><br><br>
            <div class="Personel">Head, Maintenance & Engineering Division</div>
          </div>
          <div class="signContainer">
            Approved by:<br><br><br>
            <div class="Personel">VP for Administration</div>
          </div>
        </div>

        <button type="submit" class="submit-btn">SUBMIT</button>
      </form>
    </div>

    <div id="conflictModal" class="modal" style="display:none;">
  <div class="modal-content" style="max-width:400px;padding:2rem 1.5rem;text-align:left;">
    <span class="close" id="closeConflictModalBtn" style="float:right;cursor:pointer;font-size:1.5rem;">&times;</span>
    <h2 style="color:#234734;margin-bottom:1rem;">Facility Conflict</h2>
    <div id="conflictModalBody" style="margin-bottom:1rem;"></div>
    <button id="conflictModalOkBtn" style="background:#F7CF52;color:#234734;padding:0.5rem 1.5rem;border:none;border-radius:4px;cursor:pointer;font-weight:bold;">OK</button>
  </div>
</div>
  </main>
  
</body>
</html>